<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Received Status</title>

    <!-- Bootstrap, Toastr, SweetAlert2, and Animate.css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      body {
        background-color: #121212;
        color: #f1f1f1;
        font-family: "Segoe UI", sans-serif;
      }
      header,
      footer {
        background: #1e1e1e;
        color: #fff;
      }
      .glass-form {
        background: rgba(30, 30, 30, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 30px;
        color: #fff;
        backdrop-filter: blur(12px);
      }
      .card {
        background: rgba(40, 40, 40, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.08);
        color: #fff;
        border-radius: 16px;
        transition: all 0.3s ease;
      }
      .card:hover {
        box-shadow: 0 6px 16px rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
      }
      .form-control,
      .form-select {
        background: rgba(255, 255, 255, 0.07);
        color: #fff;
        border: none;
      }
      .form-control::placeholder {
        color: #aaa;
      }
      .form-control:focus,
      .form-select:focus {
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        box-shadow: none;
      }
      .btn-success,
      .btn-outline-primary,
      .btn-outline-danger,
      .btn-warning,
      .btn-outline-success,
      .btn-danger {
        font-weight: 600;
      }
      .btn-outline-primary:hover {
        background-color: #0d6efd;
        color: #fff;
      }
      .btn-outline-danger:hover {
        background-color: #dc3545;
        color: #fff;
      }
      .btn-outline-success:hover {
        background-color: #198754;
        color: #fff;
      }
      .card-footer {
        background: transparent;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }
      hr {
        border-color: rgba(255, 255, 255, 0.1);
      }
      #loadingIndicator {
        color: #aaa;
        font-style: italic;
      }

      /* SweetAlert custom styling */
      .swal2-confirm-custom {
        background-image: linear-gradient(to right, #ff416c, #ff4b2b);
        border: none !important;
        color: #fff !important;
        font-weight: bold;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }
      .swal2-confirm-custom:hover {
        background-image: linear-gradient(to right, #ff4b2b, #ff416c);
        transform: scale(1.05);
      }
      .swal2-cancel-custom {
        background-color: #444 !important;
        color: #fff !important;
        border: none !important;
        border-radius: 8px;
        font-weight: 500;
        padding: 0.6rem 1.2rem;
      }
      .swal2-cancel-custom:hover {
        background-color: #666 !important;
      }

      /* Glowing text effect for header */
      .headlight {
        font-weight: bold;
        color: #ffcc00;
        text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffcc00, 0 0 30px #ffcc00;
      }
    </style>
  </head>
  <body>
    <header class="p-3">
      <div class="container d-flex justify-content-between align-items-center">
        <h3 class="m-0">üìÇ Case Management</h3>
        <span
          >Welcome, {{ session.user if session.get('user') else session.admin }}
          | <a href="/logout" class="text-warning">Logout</a></span
        >
      </div>
    </header>

    <div class="container my-4">
      <h4 class="mb-3 headlight">
        üì• <span class="font-weight-bold">Received Status for Case:</span> {{
        case.name }}
      </h4>

      <div class="card shadow-lg p-4 mx-auto" style="max-width: 700px">
        <p><strong>Case No.:</strong> {{ case.case_no }}</p>
        <p><strong>PO No.:</strong> {{ case.po_no }}</p>
        <p><strong>R Note No.:</strong> {{ case.r_note_no }}</p>
        <p><strong>Subject:</strong> {{ case.subject }}</p>
        <p><strong>Sent To:</strong> {{ case.sent_to }}</p>
        <p>
          <strong>üìÖ Sent Date:</strong> {{ case.sent_date.strftime('%d-%m-%Y') }}
        </p>
        <p>
          <strong>üìÖ CO6 Date:</strong> {{ case.co6_date.strftime('%d-%m-%Y') }}
        </p>

        <!-- your full HTML till... -->

        {% if case.default_date %}
        <p>
          <strong>üóì Default Date:</strong> {{
          case.default_date.strftime('%d-%m-%Y') }}
        </p>
        {% endif %} {% if case.received %}
        <div class="text-success fw-bold">
          ‚úÖ <strong>Received on:</strong> {{
          case.received_date.strftime('%d-%m-%Y %I:%M %p') }}
        </div>
        <div class="text-info fw-semibold mt-2">
          üïí No. of Days with Accounts: {{ case.no_of_days_with_accounts }} days
        </div>
        {% else %}
        <form
          method="POST"
          action="/confirm_received/{{ case.id }}"
          id="confirm-form"
        >
          <button
            type="button"
            class="btn btn-success w-100"
            onclick="confirmReceive()"
          >
            ‚úîÔ∏è Mark as Received
          </button>
        </form>
        {% endif %}

        <!-- and rest of your code below remains untouched -->

        <div class="mt-4 text-center">
          <a href="/" class="btn btn-secondary">‚Üê Back to Home</a>
        </div>
      </div>
    </div>

    <footer class="footer text-center py-3 mt-5">
      &copy; 2025 Case Management System
    </footer>

    <script>
      function confirmReceive() {
        Swal.fire({
          title: "Are you sure you want to mark this case as received?",
          icon: "question",
          showCancelButton: true,
          confirmButtonText: "Yes, Mark as Received",
          cancelButtonText: "Cancel",
          background: "#121212",
          color: "#fff",
          confirmButtonColor: "#198754",
          cancelButtonColor: "#dc3545",
          customClass: {
            confirmButton: "swal2-confirm-custom",
            cancelButton: "swal2-cancel-custom",
          },
        }).then((result) => {
          if (result.isConfirmed) {
            document.getElementById("confirm-form").submit();
          }
        });
      }
    </script>
  </body>
</html>
